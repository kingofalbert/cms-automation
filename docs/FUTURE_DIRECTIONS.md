# CMS 自动化系统未来发展方向

**创建日期**: 2025-11-02
**版本**: 1.0
**状态**: 规划中

---

## 概述

本文档记录CMS自动化系统的未来发展方向和待实施的重要功能。这些是经过分析确定需要实施但暂时不在当前迭代范围内的功能。

---

## 1. 校对系统规则重新对齐 🔴 **高优先级**

### 1.1 问题背景

经过2025-11-02的深入分析，发现校对系统存在规则定义和实现的对齐问题：

**当前状态**：
- `catalog.json` 声称354条规则（按规则功能计数）
- `rule_specs.py` 实现91个规则对象，186个检测点
- 计数方式不统一，导致覆盖率评估困难

**具体问题**：

1. **计数标准混乱**
   ```
   - 规则对象（代码单位）：91个
   - 检测点（执行单位）：186个
   - 规则功能（业务单位）：估算80-100条
   - catalog.json声称：354条
   ```

2. **catalog.json与实现不对齐**
   - catalog.json只提供示例，不是完整列表
   - 无法直接对照catalog.json验证实现进度
   - AI prompt使用catalog.json作为指导，但与确定性引擎脱节

3. **规则覆盖率不清晰**
   - A类实现29个对象（主要是A4子类），但A1/A2/A3完全未实现
   - B类、C类、F类完全未实现
   - 无法准确评估哪些规则类型已覆盖

### 1.2 目标

**重新设计规则体系，实现三层对齐**：

```
┌─────────────────────────────────────────┐
│ 规则需求文档（业务层）                    │
│ - 基于《风格指南》的规则定义              │
│ - 明确的规则ID和功能描述                 │
│ - 预计规则总数：400-450条                │
└─────────────────────────────────────────┘
              ↓ 对齐
┌─────────────────────────────────────────┐
│ catalog.json（管理层）                   │
│ - 规则清单和元数据                       │
│ - 实现状态标记（已实现/规划中/未开始）    │
│ - AI引擎指导清单                         │
└─────────────────────────────────────────┘
              ↓ 对齐
┌─────────────────────────────────────────┐
│ rule_specs.py（实现层）                  │
│ - 确定性规则代码                         │
│ - 每个规则对象映射到catalog规则ID        │
│ - 检测点统计和覆盖率追踪                 │
└─────────────────────────────────────────┘
```

### 1.3 待实施任务

#### Phase 1: 规则审计和清单重建（2-3周）

**任务1.1**: 完整提取《风格指南》中的所有规则要求
- 输入：《大纪元、新唐人总部写作风格指南》(2023/11/08版)
- 输出：`STYLE_GUIDE_RULES_COMPLETE.md`（400-450条规则清单）
- 包含：规则ID、类别、描述、示例、优先级

**任务1.2**: 重建 catalog.json 结构
- 新增字段：
  ```json
  {
    "rule_id": "A1-001",
    "summary": "...",
    "implementation_status": "implemented|planned|not_started",
    "implemented_as": ["A1-001-obj1", "A1-001-obj2"],
    "detection_count": 5,
    "last_updated": "2025-11-02"
  }
  ```
- 包含完整的400-450条规则，不只是示例

**任务1.3**: 重构 rule_specs.py 的规则映射
- 每个规则对象新增 `catalog_rule_id` 字段：
  ```python
  {
      "rule_id": "D1-101",
      "catalog_rule_id": "D1-001",  # 新增：映射到catalog
      "patterns": ["歐巴馬", "欧巴马", "奧巴馬"],
      "correct": "奥巴马",
      ...
  }
  ```

**任务1.4**: 创建规则覆盖率追踪工具
- CLI工具：`python scripts/analyze_rule_coverage.py`
- 功能：
  - 扫描 rule_specs.py 和 catalog.json
  - 生成覆盖率报告（按类别、子类别统计）
  - 识别未实现的高优先级规则
  - 输出：`RULE_COVERAGE_REPORT.json`

#### Phase 2: 统一计数标准（1周）

**任务2.1**: 制定规则计数规范
- 文档：`RULE_COUNTING_STANDARDS.md`
- 定义：
  - 规则对象（Rule Object）：代码组织单位
  - 检测点（Detection Point）：实际匹配的pattern
  - 规则功能（Rule Function）：catalog中的业务规则
- 统一术语，避免混淆

**任务2.2**: 更新所有文档和代码注释
- 使用统一的计数术语
- 在关键位置标注清楚当前数字的含义

#### Phase 3: 补充未实现的高优先级规则（4-6周）

**任务3.1**: 实现 B类（标点符号）规则
- 目标：60条规则中的30-40条高优先级规则
- 预计新增：40-50个规则对象，80-100个检测点

**任务3.2**: 实现 C类（数字用法）规则
- 目标：24条规则中的15-20条
- 预计新增：20-25个规则对象，40-50个检测点

**任务3.3**: 补充 A类缺失规则
- A1（统一用字）：实现30条
- A2（易混淆字）：实现15-20条
- A3（常见错字）：实现20-25条
- 预计新增：65-75个规则对象，100-120个检测点

#### Phase 4: 规则管理后台（3-4周）

**任务4.1**: 开发规则管理API
- `GET /api/v1/rules` - 查询规则清单
- `GET /api/v1/rules/coverage` - 查询覆盖率
- `POST /api/v1/rules` - 添加新规则
- `PUT /api/v1/rules/{rule_id}` - 更新规则状态
- `GET /api/v1/rules/stats` - 规则统计信息

**任务4.2**: 开发规则管理前端界面
- 规则浏览器（按类别、状态筛选）
- 覆盖率仪表板
- 规则测试工具（输入文本，查看哪些规则被触发）
- 规则优先级管理

### 1.4 成功指标

**完成Phase 1-2后**：
- ✅ 规则清单完整且可追踪（400-450条）
- ✅ catalog.json、rule_specs.py完全对齐
- ✅ 可以自动生成准确的覆盖率报告
- ✅ 所有文档使用统一的计数术语

**完成Phase 3后**：
- ✅ 确定性引擎规则对象数：200-250个
- ✅ 检测点总数：400-500个
- ✅ 规则功能覆盖：200-250条（约50-60%）

**完成Phase 4后**：
- ✅ 具备规则管理可视化界面
- ✅ 可以动态查看规则覆盖状态
- ✅ 支持规则优先级调整和迭代规划

### 1.5 相关文档

- 问题分析：`/docs/PROOFREADING_RULES_CORRECTED_ANALYSIS.md`
- 规则修正记录：`/docs/PROOFREADING_RULES_FIX_2025-11-02.md`
- 实现状态分析：`/docs/PROOFREADING_RULES_IMPLEMENTATION_ANALYSIS.md`

---

## 2. AI 校对引擎优化

### 2.1 当前问题

- AI引擎和确定性引擎结果合并逻辑可能产生冲突
- AI引擎的置信度评估不够精准
- 缺少对AI建议的验证机制

### 2.2 改进方向

1. **引入规则优先级系统**
   - 确定性规则置信度 > 0.9 时优先于AI建议
   - AI建议需要标注是基于哪条catalog规则

2. **AI响应结构化增强**
   - 要求AI明确引用规则ID
   - 增加AI推理过程的可解释性

3. **建立AI训练反馈循环**
   - 收集人工审核的修正数据
   - 定期分析AI误判案例
   - 优化prompt engineering

---

## 3. 性能优化

### 3.1 规则引擎性能

- 当前：逐条规则顺序匹配
- 目标：使用字典树（Trie）或AC自动机加速多模式匹配
- 预期提升：50-100x性能提升

### 3.2 批量处理优化

- 当前：顺序处理文章
- 目标：并发处理，充分利用多核CPU
- 预期提升：3-5x吞吐量提升

---

## 4. 用户体验改进

### 4.1 校对结果可视化

- 高亮显示错误位置
- 并排对比原文和修正建议
- 分类展示问题（严重/警告/提示）

### 4.2 规则解释功能

- 点击错误查看详细规则说明
- 提供风格指南原文引用
- 显示正确用法示例

### 4.3 自定义规则配置

- 用户可以启用/禁用特定规则
- 保存个人偏好配置
- 支持团队级别的规则配置

---

## 5. 集成和扩展

### 5.1 WordPress插件

- 开发WordPress校对插件
- 在编辑器中实时校对
- 发布前强制检查

### 5.2 Google Docs集成

- 作为Google Docs附加组件
- 云端校对服务API

### 5.3 浏览器扩展

- Chrome/Firefox扩展
- 任意文本框实时校对

---

## 6. 多语言支持

### 6.1 简体中文校对

- 适配简体中文写作规范
- 简繁转换规则优化

### 6.2 英文校对

- 基本语法检查
- 中英混排规范

---

## 优先级排序

| 序号 | 项目 | 优先级 | 预计工作量 | 预期开始时间 |
|------|------|--------|-----------|------------|
| 1 | 校对规则重新对齐 | 🔴 高 | 10-14周 | 2025-Q2 |
| 2 | AI引擎优化 | 🟡 中 | 4-6周 | 2025-Q2 |
| 3 | 性能优化 | 🟡 中 | 3-4周 | 2025-Q3 |
| 4 | 用户体验改进 | 🟢 低 | 6-8周 | 2025-Q3 |
| 5 | WordPress插件 | 🟡 中 | 4-5周 | 2025-Q3 |
| 6 | 其他集成 | 🟢 低 | TBD | 2025-Q4+ |
| 7 | 多语言支持 | 🟢 低 | TBD | 2025-Q4+ |

---

## 更新记录

| 日期 | 版本 | 更新内容 | 更新人 |
|------|------|---------|--------|
| 2025-11-02 | 1.0 | 初始创建，添加校对规则对齐任务 | Albert King |

---

**注意事项**：
- 本文档会随着项目进展持续更新
- 优先级可能根据业务需求调整
- 每个方向在启动前需要创建详细的实施计划
