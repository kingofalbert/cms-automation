# Phase 1 Testing Guide

**项目**: Worklist UI Enhancement
**版本**: 1.0
**日期**: 2025-11-10

---

## 📋 测试概览

本指南详细说明 Phase 1 UI 改进的测试策略、测试用例和验收标准。

### 测试目标
- ✅ 确保所有新功能正常工作
- ✅ 验证用户体验改进
- ✅ 确保无回归问题
- ✅ 验证跨浏览器兼容性

### 测试范围
- 操作按钮功能
- 快速筛选功能
- 状态徽章显示
- 国际化
- 响应式布局
- 可访问性

---

## 🧪 测试环境准备

### 1. 测试数据准备

#### 数据库设置
```sql
-- 确保有各种状态的测试数据
-- 至少每个状态 1-2 个项目

-- 检查当前状态分布
SELECT status, COUNT(*) as count
FROM worklist_items
GROUP BY status
ORDER BY status;

-- 如果缺少某些状态，手动创建或更新
UPDATE worklist_items
SET status = 'parsing_review'
WHERE id = 1;

UPDATE worklist_items
SET status = 'proofreading_review'
WHERE id = 2;

UPDATE worklist_items
SET status = 'ready_to_publish'
WHERE id = 3;
```

#### 推荐的测试数据集
| ID | Title | Status | Article ID | 用途 |
|----|-------|--------|------------|------|
| 1 | 测试文章 - 解析审核 | parsing_review | 101 | 测试审核解析按钮 |
| 2 | 测试文章 - 校对审核 | proofreading_review | 102 | 测试审核校对按钮 |
| 3 | 测试文章 - 待发布 | ready_to_publish | 103 | 测试发布按钮 |
| 4 | 测试文章 - 进行中 | parsing | NULL | 测试进行中筛选 |
| 5 | 测试文章 - 已完成 | published | 104 | 测试已完成筛选 |
| 6 | 测试文章 - 失败 | failed | NULL | 测试有问题筛选 |

### 2. 浏览器准备

确保安装以下浏览器用于兼容性测试：
- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (如果在 Mac 上)
- [ ] Edge (最新版本)

### 3. 工具准备

- [ ] 浏览器开发者工具
- [ ] React DevTools 扩展
- [ ] 屏幕截图工具
- [ ] 性能分析工具（Chrome DevTools）

---

## 🎯 测试用例

### TC-01: 操作按钮 - Parsing Review

**前置条件**:
- 有至少 1 个状态为 `parsing_review` 的项目
- 该项目有有效的 `article_id`

**测试步骤**:
1. 访问 Worklist 页面
2. 找到状态为 `parsing_review` 的项目
3. 在操作列查看按钮

**预期结果**:
- ✅ 显示「审核解析」按钮（primary 变体，蓝色）
- ✅ 按钮有 ClipboardCheck 图标
- ✅ 按钮文案正确（中文：审核解析，英文：Review Parsing）

**操作测试**:
1. 点击「审核解析」按钮

**预期结果**:
- ✅ 导航到 `/articles/{article_id}/parsing` 页面
- ✅ 不触发行点击事件（详情抽屉不应打开）
- ✅ 页面正确加载解析审核界面

**通过标准**: 所有预期结果都满足

---

### TC-02: 操作按钮 - Proofreading Review

**前置条件**:
- 有至少 1 个状态为 `proofreading_review` 的项目
- 该项目有有效的 `article_id`

**测试步骤**:
1. 访问 Worklist 页面
2. 找到状态为 `proofreading_review` 的项目
3. 在操作列查看按钮

**预期结果**:
- ✅ 显示「审核校对」按钮（primary 变体，蓝色）
- ✅ 按钮有 ClipboardCheck 图标
- ✅ 按钮文案正确（中文：审核校对，英文：Review Proofreading）

**操作测试**:
1. 点击「审核校对」按钮

**预期结果**:
- ✅ 导航到 `/worklist/{id}/review` 页面
- ✅ 不触发行点击事件
- ✅ 页面正确加载校对审核界面

**通过标准**: 所有预期结果都满足

---

### TC-03: 操作按钮 - Ready to Publish

**前置条件**:
- 有至少 1 个状态为 `ready_to_publish` 的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 找到状态为 `ready_to_publish` 的项目
3. 在操作列查看按钮

**预期结果**:
- ✅ 显示「发布到 WordPress」按钮（success 变体，绿色）
- ✅ 按钮有 Send 图标
- ✅ 按钮文案正确（中文：发布到 WordPress，英文：Publish to WordPress）

**操作测试**:
1. 点击「发布到 WordPress」按钮
2. 在确认对话框中点击「取消」

**预期结果**:
- ✅ 显示确认对话框
- ✅ 对话框文案正确（中文：确定要发布这篇文章到 WordPress 吗？）
- ✅ 点击取消后不发布

**操作测试 2**:
1. 再次点击「发布到 WordPress」按钮
2. 在确认对话框中点击「确定」

**预期结果**:
- ✅ 触发 publish mutation
- ✅ 显示加载状态或成功提示
- ✅ 项目状态更新为 `publishing` 或 `published`

**通过标准**: 所有预期结果都满足

---

### TC-04: 操作按钮 - View Details

**前置条件**:
- 有任意状态的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 对于每个状态的项目，检查操作列

**预期结果**:
- ✅ 所有状态的项目都显示「查看详情」按钮（outline 变体）
- ✅ 按钮有 Eye 图标
- ✅ 按钮文案正确（中文：查看详情，英文：View Details）

**操作测试**:
1. 点击任意项目的「查看详情」按钮

**预期结果**:
- ✅ 打开详情抽屉
- ✅ 显示正确的项目信息
- ✅ 不触发导航

**通过标准**: 所有预期结果都满足

---

### TC-05: 快速筛选 - 需要我处理

**前置条件**:
- 有至少 1 个状态为 `parsing_review`, `proofreading_review`, 或 `ready_to_publish` 的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 查看快速筛选区域

**预期结果**:
- ✅ 显示「需要我处理」按钮
- ✅ 按钮有 Bell 图标
- ✅ 显示正确的项目数量徽章

**操作测试**:
1. 点击「需要我处理」按钮

**预期结果**:
- ✅ 表格只显示需要操作的项目
- ✅ 按钮高亮显示（primary 变体）
- ✅ 显示「清除全部」按钮

**验证测试**:
1. 手动计数状态为 `parsing_review`, `proofreading_review`, `ready_to_publish` 的项目
2. 对比徽章数字和实际数量

**预期结果**:
- ✅ 徽章数字与实际数量一致

**通过标准**: 所有预期结果都满足

---

### TC-06: 快速筛选 - 进行中

**前置条件**:
- 有至少 1 个状态为 `parsing`, `proofreading`, 或 `publishing` 的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 点击「进行中」按钮

**预期结果**:
- ✅ 表格只显示进行中的项目
- ✅ 按钮高亮显示
- ✅ 徽章数字正确

**通过标准**: 所有预期结果都满足

---

### TC-07: 快速筛选 - 已完成

**前置条件**:
- 有至少 1 个状态为 `published` 的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 点击「已完成」按钮

**预期结果**:
- ✅ 表格只显示已发布的项目
- ✅ 按钮高亮显示
- ✅ 徽章数字正确

**通过标准**: 所有预期结果都满足

---

### TC-08: 快速筛选 - 有问题

**前置条件**:
- 有至少 1 个状态为 `failed` 的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 点击「有问题」按钮

**预期结果**:
- ✅ 表格只显示失败的项目
- ✅ 按钮高亮显示（红色主题）
- ✅ 徽章数字正确

**通过标准**: 所有预期结果都满足

---

### TC-09: 快速筛选 - 清除全部

**前置条件**:
- 任意快速筛选已激活

**测试步骤**:
1. 激活任意快速筛选
2. 点击「清除全部」按钮（X 图标）

**预期结果**:
- ✅ 显示所有项目
- ✅ 所有筛选条件重置
- ✅ 没有按钮高亮显示
- ✅ 「清除全部」按钮消失

**通过标准**: 所有预期结果都满足

---

### TC-10: 快速筛选 - 徽章实时更新

**前置条件**:
- 有测试数据

**测试步骤**:
1. 访问 Worklist 页面
2. 记录「需要我处理」的徽章数字（假设为 N）
3. 打开一个 `pending` 项目的详情抽屉
4. 将状态改为 `parsing_review`
5. 关闭详情抽屉

**预期结果**:
- ✅ 「需要我处理」徽章数字更新为 N+1
- ✅ 更新不需要刷新页面

**通过标准**: 所有预期结果都满足

---

### TC-11: 状态徽章 - 图标显示

**前置条件**:
- 有各种状态的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 检查每个状态的徽章

**预期结果**:
| 状态 | 图标 | 颜色 | 动画 |
|------|------|------|------|
| pending | Clock | 灰色 | 无 |
| parsing | Loader | 蓝色 | 有 |
| parsing_review | ClipboardCheck | 橙色 | 无 |
| proofreading | Edit | 蓝色 | 有 |
| proofreading_review | ClipboardCheck | 橙色 | 无 |
| ready_to_publish | CheckCircle | 绿色 | 无 |
| publishing | Upload | 蓝色 | 有 |
| published | Check | 绿色 | 无 |
| failed | AlertCircle | 红色 | 有 |

**通过标准**: 所有徽章符合预期配置

---

### TC-12: 状态徽章 - 脉动动画

**前置条件**:
- 有状态为 `parsing`, `proofreading`, `publishing`, 或 `failed` 的项目

**测试步骤**:
1. 访问 Worklist 页面
2. 观察进行中状态的徽章

**预期结果**:
- ✅ `parsing` 徽章有脉动动画
- ✅ `proofreading` 徽章有脉动动画
- ✅ `publishing` 徽章有脉动动画
- ✅ `failed` 徽章有脉动动画
- ✅ 其他状态徽章无动画

**通过标准**: 所有预期结果都满足

---

### TC-13: 国际化 - 中文

**前置条件**:
- 语言设置为中文（zh-TW）

**测试步骤**:
1. 访问 Worklist 页面
2. 检查所有新增的 UI 元素

**预期结果**:
- ✅ 快速筛选标题：「快速篩選」
- ✅ 需要我处理：「需要我處理」
- ✅ 进行中：「進行中」
- ✅ 已完成：「已完成」
- ✅ 有问题：「有問題」
- ✅ 审核解析：「審核解析」
- ✅ 审核校对：「審核校對」
- ✅ 发布：「發布到 WordPress」
- ✅ 查看详情：「查看詳情」

**通过标准**: 所有文本显示正确的中文翻译

---

### TC-14: 国际化 - 英文

**前置条件**:
- 语言设置为英文（en-US）

**测试步骤**:
1. 切换语言到英文
2. 访问 Worklist 页面
3. 检查所有新增的 UI 元素

**预期结果**:
- ✅ 快速筛选标题：「Quick Filters」
- ✅ 需要我处理：「Needs My Action」
- ✅ 进行中：「In Progress」
- ✅ 已完成：「Completed」
- ✅ 有问题：「Issues」
- ✅ 审核解析：「Review Parsing」
- ✅ 审核校对：「Review Proofreading」
- ✅ 发布：「Publish to WordPress」
- ✅ 查看详情：「View Details」

**通过标准**: 所有文本显示正确的英文翻译

---

### TC-15: 响应式布局 - 桌面

**前置条件**:
- 浏览器窗口宽度 >= 1024px

**测试步骤**:
1. 设置浏览器窗口为 1920x1080
2. 访问 Worklist 页面

**预期结果**:
- ✅ 快速筛选按钮横向排列
- ✅ 表格所有列都可见
- ✅ 操作按钮完整显示
- ✅ 无水平滚动条

**通过标准**: 所有预期结果都满足

---

### TC-16: 响应式布局 - 平板

**前置条件**:
- 浏览器窗口宽度 768px - 1023px

**测试步骤**:
1. 设置浏览器窗口为 768x1024
2. 访问 Worklist 页面

**预期结果**:
- ✅ 快速筛选按钮可能换行，但仍可见
- ✅ 表格可能出现水平滚动
- ✅ 操作按钮完整显示
- ✅ 布局不破坏

**通过标准**: 所有预期结果都满足

---

### TC-17: 响应式布局 - 手机

**前置条件**:
- 浏览器窗口宽度 < 768px

**测试步骤**:
1. 设置浏览器窗口为 375x667（iPhone SE）
2. 访问 Worklist 页面

**预期结果**:
- ✅ 快速筛选按钮垂直堆叠或换行
- ✅ 表格出现水平滚动
- ✅ 按钮可触摸（最小 44x44px）
- ✅ 文字可读

**通过标准**: 所有预期结果都满足

---

### TC-18: 可访问性 - 键盘导航

**前置条件**:
- 使用键盘操作

**测试步骤**:
1. 访问 Worklist 页面
2. 按 Tab 键导航

**预期结果**:
- ✅ 快速筛选按钮可以用 Tab 导航
- ✅ 操作按钮可以用 Tab 导航
- ✅ 焦点指示器清晰可见
- ✅ 按 Enter 键可以激活按钮

**通过标准**: 所有预期结果都满足

---

### TC-19: 性能 - 渲染时间

**前置条件**:
- 有 50+ 个项目

**测试步骤**:
1. 打开 Chrome DevTools
2. 切换到 Performance 标签
3. 开始录制
4. 访问 Worklist 页面
5. 等待完全加载
6. 停止录制

**预期结果**:
- ✅ 初始渲染 < 1000ms
- ✅ 快速筛选切换 < 200ms
- ✅ 无明显卡顿

**通过标准**: 所有预期结果都满足

---

### TC-20: 错误处理 - 网络错误

**前置条件**:
- 断开网络或使用 DevTools 模拟离线

**测试步骤**:
1. 访问 Worklist 页面（在线）
2. 断开网络
3. 点击「发布」按钮

**预期结果**:
- ✅ 显示错误提示
- ✅ 不破坏页面布局
- ✅ 可以重试

**通过标准**: 所有预期结果都满足

---

## 📊 测试报告模板

### 测试执行摘要

| 项目 | 值 |
|------|-----|
| 测试日期 | YYYY-MM-DD |
| 测试人员 | 姓名 |
| 测试环境 | 浏览器 + 版本 |
| 总测试用例 | 20 |
| 通过 | X |
| 失败 | X |
| 阻塞 | X |
| 通过率 | X% |

### 失败的测试用例

| 用例 ID | 用例名称 | 失败原因 | 严重程度 | 负责人 |
|---------|---------|---------|---------|--------|
| TC-XX | XXX | XXX | Critical/Major/Minor | XXX |

### 发现的问题

| 问题 ID | 描述 | 严重程度 | 状态 | 负责人 |
|---------|------|---------|------|--------|
| BUG-001 | XXX | Critical | Open | XXX |

### 建议

1. XXX
2. XXX
3. XXX

---

## 🔍 探索性测试指南

### 测试场景

#### 场景 1: 工作流完整性
- 尝试从 `pending` 状态一步步推进到 `published`
- 检查每个阶段的按钮是否符合预期
- 验证状态变更的连贯性

#### 场景 2: 边界情况
- 测试空列表状态
- 测试单个项目
- 测试大量项目（100+）
- 测试非常长的标题
- 测试缺少 article_id 的项目

#### 场景 3: 交叉功能
- 快速筛选 + 搜索
- 快速筛选 + 状态下拉菜单
- 快速筛选 + 作者筛选
- 同步 + 快速筛选（实时更新）

#### 场景 4: 用户体验
- 连续点击多个快速筛选
- 在操作中间刷新页面
- 打开多个详情抽屉
- 快速连续点击操作按钮

---

## ✅ 验收标准

### 功能验收
- [ ] 所有测试用例通过率 >= 95%
- [ ] 无 Critical 或 Blocker 问题
- [ ] 所有 P0 功能正常工作

### 性能验收
- [ ] 初始加载时间 < 1s（50 个项目）
- [ ] 快速筛选响应时间 < 200ms
- [ ] 无内存泄漏

### 用户体验验收
- [ ] 操作直观，无需培训
- [ ] 视觉清晰，状态一目了然
- [ ] 响应及时，无明显延迟

### 兼容性验收
- [ ] Chrome 测试通过
- [ ] Firefox 测试通过
- [ ] Safari 测试通过（如适用）
- [ ] Edge 测试通过

---

**测试指南状态**: ✅ Ready for Testing
**创建人**: Claude Code
**版本**: 1.0
