# Playwright vs Computer Use æ–¹æ¡ˆå¯¹æ¯”ä¸é…ç½®æŒ‡å—

## ğŸ†š ä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”

### Anthropic Computer Use (æ™ºèƒ½AIæ–¹æ¡ˆ) ğŸ¤–

**å·¥ä½œåŸç†ï¼š**
```
Claudeçœ‹å±å¹•æˆªå›¾ â†’ ç†è§£ç•Œé¢ â†’ æ¨ç†ä¸‹ä¸€æ­¥ â†’ æ‰§è¡Œæ“ä½œ
```

**ä¼˜ç‚¹ âœ…**
- ğŸ§  **æ™ºèƒ½é€‚åº”**ï¼šèƒ½ç†è§£ä¸åŒçš„WordPressä¸»é¢˜å’Œå¸ƒå±€
- ğŸ”„ **çµæ´»å¤„ç†**ï¼šç•Œé¢å˜åŒ–äº†ä¹Ÿèƒ½æ‰¾åˆ°æŒ‰é’®
- ğŸ› ï¸ **è‡ªåŠ¨ä¿®å¤**ï¼šé‡åˆ°é”™è¯¯èƒ½è‡ªå·±å°è¯•è§£å†³
- ğŸ“ **ç®€å•é…ç½®**ï¼šåªéœ€æä¾›æ–‡å­—è¯´æ˜å³å¯

**ç¼ºç‚¹ âŒ**
- ğŸ’° **è´¹ç”¨**ï¼šæ¯æ¬¡å‘å¸ƒçº¦ $0.10-0.50
- â±ï¸ **è¾ƒæ…¢**ï¼šéœ€è¦AIæ¨ç†æ—¶é—´ï¼ˆ2-5åˆ†é’Ÿ/ç¯‡ï¼‰
- ğŸ² **ä¸ç¡®å®šæ€§**ï¼šæˆåŠŸç‡çº¦85-95%

**é€‚åˆåœºæ™¯ï¼š**
- WordPressä¸»é¢˜ç»å¸¸æ›´æ–°
- éœ€è¦å¤„ç†å¤æ‚çš„è‡ªå®šä¹‰ç•Œé¢
- é¢„ç®—å……è¶³
- å‘å¸ƒé‡ä¸å¤§ï¼ˆ<100ç¯‡/æœˆï¼‰

---

### Playwright + Chrome DevTools (ç²¾ç¡®è„šæœ¬æ–¹æ¡ˆ) ğŸ­

**å·¥ä½œåŸç†ï¼š**
```
è¯»å–é¢„è®¾è„šæœ¬ â†’ ç²¾ç¡®å®šä½å…ƒç´  â†’ æœºæ¢°æ‰§è¡Œæ“ä½œ
```

**ä¼˜ç‚¹ âœ…**
- ğŸ’µ **å®Œå…¨å…è´¹**ï¼šæ— ä»»ä½•APIè´¹ç”¨
- âš¡ **æå¿«**ï¼š30ç§’-2åˆ†é’Ÿ/ç¯‡
- ğŸ¯ **ç¡®å®šæ€§**ï¼šé…ç½®å¯¹äº†100%æˆåŠŸ
- ğŸ“Š **å¯é¢„æµ‹**ï¼šæ¯æ¬¡æ“ä½œå®Œå…¨ä¸€è‡´

**ç¼ºç‚¹ âŒ**
- ğŸ”§ **é…ç½®å¤æ‚**ï¼šéœ€è¦ç²¾ç¡®çš„CSSé€‰æ‹©å™¨
- ğŸ’” **è„†å¼±**ï¼šç•Œé¢å˜åŒ–åéœ€è¦é‡æ–°é…ç½®
- ğŸš« **æ— æ™ºèƒ½**ï¼šä¸ä¼šå¤„ç†æ„å¤–æƒ…å†µ
- â° **ç»´æŠ¤æˆæœ¬**ï¼šWordPressæ›´æ–°åå¯èƒ½éœ€è¦è°ƒæ•´

**é€‚åˆåœºæ™¯ï¼š**
- WordPressä¸»é¢˜ç¨³å®šä¸å˜
- å¤§é‡å‘å¸ƒéœ€æ±‚ï¼ˆ>100ç¯‡/æœˆï¼‰
- é¢„ç®—æœ‰é™
- æŠ€æœ¯èƒ½åŠ›å¼ºï¼ˆèƒ½é…ç½®CSSé€‰æ‹©å™¨ï¼‰

---

## ğŸ“Š æˆæœ¬å¯¹æ¯”ï¼ˆå‡è®¾å‘å¸ƒ100ç¯‡æ–‡ç« ï¼‰

| æ–¹æ¡ˆ | å•ç¯‡æˆæœ¬ | 100ç¯‡æ€»æˆæœ¬ | é…ç½®æ—¶é—´ | ç»´æŠ¤æˆæœ¬ |
|------|---------|------------|---------|---------|
| **Computer Use** | $0.20 | $20 | 10åˆ†é’Ÿ | å¾ˆä½ |
| **Playwright** | $0 | $0 | 2-4å°æ—¶ | ä¸­ç­‰ |

**ç»“è®ºï¼š**
- å‘å¸ƒ < 100ç¯‡ï¼šç”¨ Computer Useï¼ˆçœæ—¶é—´ï¼‰
- å‘å¸ƒ > 500ç¯‡ï¼šç”¨ Playwrightï¼ˆçœé’±ï¼‰
- 100-500ç¯‡ï¼šçœ‹ä½ æ›´çœ‹é‡æ—¶é—´è¿˜æ˜¯é’±

---

## ğŸ› ï¸ Playwright å®Œæ•´é…ç½®æµç¨‹

### æ­¥éª¤1ï¸âƒ£ï¼šæå–WordPressé€‰æ‹©å™¨ï¼ˆæœ€é‡è¦ï¼ï¼‰

1. **ç™»å½•ä½ çš„WordPressåå°**

2. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·**
   - æŒ‰ `F12` æˆ–å³é”® â†’ "æ£€æŸ¥"

3. **åˆ‡æ¢åˆ°Consoleæ ‡ç­¾**

4. **å¤åˆ¶ç²˜è´´é€‰æ‹©å™¨æå–å·¥å…·**
   - æ‰“å¼€æ–‡ä»¶ï¼š`/backend/tools/extract_wordpress_selectors.js`
   - å…¨é€‰å¤åˆ¶æ•´ä¸ªè„šæœ¬
   - ç²˜è´´åˆ°Consoleä¸­ï¼ŒæŒ‰å›è½¦

5. **æŒ‰æç¤ºæ“ä½œ**
   ```
   é€‰é¡¹1ï¼šè‡ªåŠ¨æ£€æµ‹ï¼ˆå¿«é€Ÿï¼Œä½†å¯èƒ½ä¸å®Œæ•´ï¼‰
   è¿è¡Œï¼šautoDetect()

   é€‰é¡¹2ï¼šæ‰‹åŠ¨åˆ†æ­¥æå–ï¼ˆæ¨èï¼Œå®Œæ•´å‡†ç¡®ï¼‰
   ç¬¬1æ­¥ï¼šstep1_extractLoginSelectors()
         â†’ åœ¨ç™»å½•é¡µé¢è¿è¡Œ step1_complete()

   ç¬¬2æ­¥ï¼šstep2_extractDashboardSelectors()
         â†’ åœ¨ä»ªè¡¨ç›˜è¿è¡Œ step2_complete()

   ç¬¬3æ­¥ï¼šstep3_extractEditorSelectors()
         â†’ ç‚¹å‡»"æ–°å»ºæ–‡ç« "åè¿è¡Œ step3_complete()

   ç¬¬4æ­¥ï¼šstep4_extractMediaSelectors()
         â†’ æ‰“å¼€åª’ä½“ä¸Šä¼ åè¿è¡Œ step4_complete()

   ç¬¬5æ­¥ï¼šstep5_extractSEOSelectors()
         â†’ æ‰¾åˆ°SEOé¢æ¿åè¿è¡Œ step5_complete()

   å®Œæˆï¼šshowResults()
         â†’ è‡ªåŠ¨å¤åˆ¶JSONé…ç½®åˆ°å‰ªè´´æ¿
   ```

6. **ä¿å­˜é…ç½®æ–‡ä»¶**
   - åˆ›å»ºæ–‡ä»¶ï¼š`/backend/config/wordpress_selectors.json`
   - ç²˜è´´åˆšæ‰å¤åˆ¶çš„JSONé…ç½®

### æ­¥éª¤2ï¸âƒ£ï¼šéªŒè¯é…ç½®

æå–åˆ°çš„JSONåº”è¯¥ç±»ä¼¼è¿™æ ·ï¼š

```json
{
  "metadata": {
    "wordpress_version": "WordPress 6.4",
    "editor_type": "Gutenberg",
    "seo_plugin": "Yoast SEO",
    "extracted_at": "2025-01-15T10:30:00Z"
  },
  "login": {
    "username_field": "#user_login",
    "password_field": "#user_pass",
    "submit_button": "#wp-submit"
  },
  "dashboard": {
    "posts_menu": "#menu-posts",
    "new_post_link": "#menu-posts a[href*='post-new']"
  },
  "editor": {
    "title_field": ".editor-post-title__input",
    "content_area": ".block-editor-default-block-appender__content",
    "add_block_button": ".block-editor-inserter__toggle"
  },
  "seo": {
    "focus_keyword_field": "input[name='yoast_wpseo_focuskw']",
    "meta_description_field": "textarea[name='yoast_wpseo_metadesc']"
  },
  "publish": {
    "publish_button": ".editor-post-publish-button__button"
  },
  "waits": {
    "after_login": 2000,
    "editor_load": 5000,
    "after_type": 500,
    "media_upload": 3000,
    "before_publish": 1000
  }
}
```

### æ­¥éª¤3ï¸âƒ£ï¼šé›†æˆåˆ°ä»£ç 

ä¿®æ”¹ `computer_use_tasks.py` ä½¿ç”¨Playwrightï¼š

```python
# åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ å¯¼å…¥
from src.services.providers.playwright_wordpress_publisher import (
    create_playwright_publisher
)

# åœ¨ publish_article_with_computer_use_task å‡½æ•°ä¸­
# æ›¿æ¢è¿™éƒ¨åˆ†ï¼š
# computer_use_service = ComputerUseCMSService()

# æ”¹ä¸ºï¼š
config_path = "/app/config/wordpress_selectors.json"
playwright_publisher = await create_playwright_publisher(config_path)

# å‘å¸ƒæ–‡ç« 
publish_result = await playwright_publisher.publish_article(
    cms_url=cms_url,
    username=cms_username,
    password=cms_password,
    article_title=article.title,
    article_body=article.body,
    seo_data=seo_data,
    article_images=article_images,
    headless=True,  # æ— å¤´æ¨¡å¼ï¼ˆåå°è¿è¡Œï¼‰
)
```

### æ­¥éª¤4ï¸âƒ£ï¼šå®‰è£…Playwrightä¾èµ–

```bash
# è¿›å…¥backendå®¹å™¨
docker compose exec backend bash

# å®‰è£…Playwright
pip install playwright

# å®‰è£…æµè§ˆå™¨
playwright install chromium
playwright install-deps
```

### æ­¥éª¤5ï¸âƒ£ï¼šæµ‹è¯•

```bash
# æµ‹è¯•å‘å¸ƒ
curl -X POST http://localhost:8000/v1/computer-use/publish \
  -H "Content-Type: application/json" \
  -d '{
    "article_id": 123,
    "cms_type": "wordpress"
  }'
```

---

## ğŸ”§ é…ç½®ä¼˜åŒ–æŠ€å·§

### æŠ€å·§1ï¼šæ‰¾ä¸åˆ°å…ƒç´ æ€ä¹ˆåŠï¼Ÿ

**é—®é¢˜ï¼š** CSSé€‰æ‹©å™¨ä¸å·¥ä½œ

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ‰“å¼€Chrome DevTools
2. åœ¨Elementsæ ‡ç­¾ä¸­æ‰¾åˆ°è¯¥å…ƒç´ 
3. å³é”®å…ƒç´  â†’ Copy â†’ Copy selector
4. ç²˜è´´åˆ°é…ç½®æ–‡ä»¶

**ç¤ºä¾‹ï¼š**
```json
// å¦‚æœé»˜è®¤çš„ ".editor-post-title__input" ä¸å·¥ä½œ
// ç”¨DevToolsæ‰¾åˆ°æ–°çš„é€‰æ‹©å™¨
"title_field": "textarea.editor-post-title__input.wp-block-post-title"
```

### æŠ€å·§2ï¼šç­‰å¾…æ—¶é—´å¤ªçŸ­/å¤ªé•¿

**è°ƒæ•´ç­‰å¾…æ—¶é—´ï¼š**
```json
"waits": {
  "after_login": 3000,      // ç™»å½•æ…¢ï¼Ÿå¢åŠ åˆ°3ç§’
  "editor_load": 8000,      // ç¼–è¾‘å™¨åŠ è½½æ…¢ï¼Ÿå¢åŠ åˆ°8ç§’
  "media_upload": 5000      // å›¾ç‰‡ä¸Šä¼ æ…¢ï¼Ÿå¢åŠ åˆ°5ç§’
}
```

### æŠ€å·§3ï¼šå¤„ç†iframe

**å¦‚æœç¼–è¾‘å™¨åœ¨iframeä¸­ï¼š**
```python
# åœ¨ playwright_wordpress_publisher.py ä¸­æ·»åŠ ï¼š
async def _step_set_content(self, content: str):
    # åˆ‡æ¢åˆ°iframe
    frame = self.page.frame(name="editor-frame")
    if frame:
        await frame.click(self.config["editor"]["content_area"])
        await frame.keyboard.type(content)
    else:
        # æ­£å¸¸å¤„ç†
        await self.page.click(self.config["editor"]["content_area"])
        await self.page.keyboard.type(content)
```

### æŠ€å·§4ï¼šä¸åŒä¸»é¢˜çš„é…ç½®

**Elementorä¸»é¢˜ï¼š**
```json
{
  "metadata": {
    "editor_type": "Elementor"
  },
  "editor": {
    "add_section_button": ".elementor-add-section-button",
    "text_widget": ".elementor-element-edit-mode[data-widget_type='text-editor']"
  }
}
```

**Classic Editorï¼š**
```json
{
  "metadata": {
    "editor_type": "Classic Editor"
  },
  "editor": {
    "title_field": "#title",
    "content_area": "#content",
    "visual_tab": "#content-tmce",
    "text_tab": "#content-html"
  }
}
```

---

## ğŸ¯ æˆ‘çš„å»ºè®®ï¼ˆåŸºäºä½ çš„æƒ…å†µï¼‰

### é—®é¢˜ï¼šä½ åº”è¯¥ç”¨å“ªä¸ªæ–¹æ¡ˆï¼Ÿ

**æˆ‘å»ºè®®åˆ†ä¸¤æ­¥èµ°ï¼š**

### ç¬¬1æ­¥ï¼šå…ˆç”¨Computer Useï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰âœ…

**åŸå› ï¼š**
1. âœ… ç«‹å³å¯ç”¨ï¼Œæˆ‘å·²ç»å†™å¥½äº†æŒ‡ä»¤
2. âœ… å‘å¸ƒå‡ ç¯‡æµ‹è¯•çœ‹çœ‹æ•ˆæœ
3. âœ… è§‚å¯ŸVNCå½•å±ï¼Œäº†è§£WordPressæ“ä½œæµç¨‹
4. âœ… éªŒè¯æ•´ä¸ªç³»ç»Ÿèƒ½æ­£å¸¸å·¥ä½œ

**è¿™ä¸€æ­¥åªéœ€è¦ï¼š**
- é…ç½®å¥½Google Drive Shared Drive
- è¿è¡Œç°æœ‰ä»£ç å³å¯

**æˆæœ¬ï¼š** æµ‹è¯•10ç¯‡æ–‡ç«  â‰ˆ $2

---

### ç¬¬2æ­¥ï¼šå‘å¸ƒé‡å¤§æ—¶åˆ‡æ¢åˆ°Playwrightï¼ˆçœé’±ï¼‰ğŸ’°

**ä»€ä¹ˆæ—¶å€™åˆ‡æ¢ï¼Ÿ**
- å‘å¸ƒè¶…è¿‡100ç¯‡å
- æœˆåº¦å‘å¸ƒæˆæœ¬è¶…è¿‡$20
- ç³»ç»Ÿè¿è¡Œç¨³å®šäº†

**å¦‚ä½•åˆ‡æ¢ï¼Ÿ**
1. ä½¿ç”¨æˆ‘æä¾›çš„æå–å·¥å…·è·å–CSSé€‰æ‹©å™¨ï¼ˆ30åˆ†é’Ÿï¼‰
2. ä¿å­˜é…ç½®æ–‡ä»¶ï¼ˆ5åˆ†é’Ÿï¼‰
3. ä¿®æ”¹ä»£ç ä½¿ç”¨Playwrightï¼ˆ15åˆ†é’Ÿï¼‰
4. æµ‹è¯•è°ƒä¼˜ï¼ˆ1-2å°æ—¶ï¼‰

**èŠ‚çœï¼š** æ¯æœˆå‘å¸ƒ500ç¯‡
- Computer Useæ–¹æ¡ˆï¼š$100/æœˆ
- Playwrightæ–¹æ¡ˆï¼š$0/æœˆ
- **èŠ‚çœï¼š$100/æœˆ = $1200/å¹´**

---

## ğŸ“ æ€»ç»“

### ä½ ç°åœ¨éœ€è¦åšä»€ä¹ˆï¼Ÿ

#### é€‰é¡¹Aï¼šå…ˆç”¨Computer Useï¼ˆæ¨èï¼‰ â­

**ç«‹å³è¡ŒåŠ¨ï¼š**
1. âœ… é…ç½®Google Drive Shared Driveï¼ˆè¿˜æ²¡åšçš„è¯ï¼‰
2. âœ… æµ‹è¯•å‘å¸ƒåŠŸèƒ½ï¼ˆä»£ç å·²ç»readyï¼‰
3. âœ… è§‚å¯Ÿæ•ˆæœå’Œæˆæœ¬

**ä»€ä¹ˆéƒ½ä¸ç”¨æ”¹ï¼Œç›´æ¥ç”¨ï¼**

---

#### é€‰é¡¹Bï¼šç›´æ¥ä¸ŠPlaywrightï¼ˆçœé’±ä½†è€—æ—¶ï¼‰

**éœ€è¦åšï¼š**
1. â° èŠ±2-4å°æ—¶æå–CSSé€‰æ‹©å™¨
2. â° é…ç½®å’Œæµ‹è¯•
3. â° è°ƒè¯•ä¼˜åŒ–

**é€‚åˆï¼š**
- ä½ å¾ˆåœ¨æ„æˆæœ¬
- æœ‰æŠ€æœ¯èƒ½åŠ›é…ç½®
- ä¸æ€¥ç€é©¬ä¸Šä¸Šçº¿

---

#### é€‰é¡¹Cï¼šæ··åˆä½¿ç”¨ï¼ˆæœ€ä½³å®è·µï¼‰ğŸ¯

**ç­–ç•¥ï¼š**
- ğŸ¤– æ—¥å¸¸å‘å¸ƒï¼šç”¨Playwrightï¼ˆå…è´¹ï¼‰
- ğŸ§  ç‰¹æ®Šæƒ…å†µï¼šç”¨Computer Useï¼ˆæ™ºèƒ½ï¼‰
- ğŸ“Š ABæµ‹è¯•ï¼šå¯¹æ¯”ä¸¤ç§æ–¹æ¡ˆ

**åœ¨ä»£ç ä¸­å®ç°ï¼š**
```python
# æ ¹æ®æ–‡ç« ç±»å‹é€‰æ‹©å‘å¸ƒæ–¹å¼
if article.is_complex or article.has_custom_fields:
    # å¤æ‚æ–‡ç« ç”¨Computer Use
    publisher = ComputerUseCMSService()
else:
    # æ™®é€šæ–‡ç« ç”¨Playwright
    publisher = await create_playwright_publisher(config_path)
```

---

## â“ ä½ æƒ³æ€ä¹ˆåšï¼Ÿ

**å›ç­”æˆ‘è¿™å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘å¸®ä½ å†³å®šï¼š**

1. **é¢„ç®—æ•æ„Ÿåº¦ï¼š** åœ¨æ„æˆæœ¬å—ï¼Ÿ
   - åœ¨æ„ â†’ Playwright
   - ä¸å¤ªåœ¨æ„ â†’ Computer Use

2. **å‘å¸ƒé‡ï¼š** æ¯æœˆå‘å¸ƒå¤šå°‘ç¯‡ï¼Ÿ
   - <100ç¯‡ â†’ Computer Use
   - >500ç¯‡ â†’ Playwright
   - 100-500ç¯‡ â†’ çœ‹é¢„ç®—

3. **æŠ€æœ¯èƒ½åŠ›ï¼š** èƒ½é…ç½®CSSé€‰æ‹©å™¨å—ï¼Ÿ
   - èƒ½ â†’ Playwright
   - ä¸å¤ªä¼š â†’ Computer Use

4. **æ—¶é—´ç´§è¿«åº¦ï¼š** éœ€è¦é©¬ä¸Šä¸Šçº¿å—ï¼Ÿ
   - æ˜¯ â†’ Computer Useï¼ˆå·²ç»readyï¼‰
   - ä¸æ€¥ â†’ Playwrightï¼ˆéœ€è¦é…ç½®ï¼‰

**å‘Šè¯‰æˆ‘ä½ çš„ç­”æ¡ˆï¼Œæˆ‘ç»™ä½ æœ€åˆé€‚çš„æ–¹æ¡ˆï¼** ğŸš€
