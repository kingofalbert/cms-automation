# ================================
# CMS Automation System - Environment Configuration
# ================================
# Copy this file to .env and fill in the values
# Never commit .env to version control!
# ================================

# ================================
# Application Configuration
# ================================
ENVIRONMENT=development
LOG_LEVEL=INFO

# Secret key for session management and JWT signing (minimum 32 characters)
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-here-minimum-32-characters-long

# CORS allowed origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# ================================
# API Configuration
# ================================
API_PORT=8000
API_HOST=0.0.0.0
API_TITLE=CMS Automation API
API_VERSION=1.0.0

# ================================
# Database Configuration (PostgreSQL)
# ================================
# Format: postgresql+asyncpg://username:password@host:port/database
# Example: postgresql+asyncpg://cms_user:cms_password@localhost:5432/cms_automation
DATABASE_URL=postgresql+asyncpg://cms_user:cms_password@localhost:5432/cms_automation

# Database connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# ================================
# Redis Configuration
# ================================
# Format: redis://host:port/db
# Example: redis://localhost:6379/0
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# ================================
# Anthropic API Configuration (Claude)
# ================================
# Required for Computer Use publishing
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Model configuration
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_MAX_TOKENS=4096

# ================================
# Google Drive Configuration
# ================================
# Path to Google Drive service account credentials JSON file
# See: backend/docs/google_drive_integration_guide.md for setup instructions
GOOGLE_DRIVE_CREDENTIALS_PATH=/app/credentials/google-drive-credentials.json

# Google Drive folder ID for storing files
# Get from folder URL: https://drive.google.com/drive/folders/YOUR_FOLDER_ID_HERE
GOOGLE_DRIVE_FOLDER_ID=your-folder-id-here

# ================================
# WordPress/CMS Integration
# ================================
# CMS platform type: wordpress, strapi, contentful, or ghost
CMS_TYPE=wordpress

# WordPress base URL
CMS_BASE_URL=https://your-wordpress-site.com

# WordPress authentication
# For WordPress Application Password authentication
CMS_USERNAME=your-wordpress-username
CMS_APPLICATION_PASSWORD=your-wordpress-app-password

# Alternative: API token (for other CMS platforms)
CMS_API_TOKEN=

# ================================
# Production WordPress (Optional)
# ================================
# If using a production WordPress instance with HTTP Basic Auth
PROD_WORDPRESS_URL=https://admin.epochtimes.com
PROD_LOGIN_URL=https://admin.epochtimes.com/wp-login.php

# HTTP Basic Auth (first layer)
PROD_FIRST_LAYER_USERNAME=
PROD_FIRST_LAYER_PASSWORD=

# WordPress credentials (second layer)
PROD_USERNAME=
PROD_PASSWORD=

# ================================
# Article Generation Settings
# ================================
MAX_ARTICLE_WORD_COUNT=10000
MIN_ARTICLE_WORD_COUNT=100
DEFAULT_ARTICLE_WORD_COUNT=1000
MAX_ARTICLE_GENERATION_TIME=300
MAX_ARTICLE_COST=0.50

# ================================
# Feature Flags
# ================================
ENABLE_SEMANTIC_SIMILARITY=true
SIMILARITY_THRESHOLD=0.85
MAX_CONCURRENT_GENERATIONS=10

# ================================
# Retry Configuration
# ================================
MAX_RETRIES=3
RETRY_DELAY=300

# ================================
# Monitoring
# ================================
ENABLE_METRICS=true
METRICS_PORT=9090

# ================================
# Celery Configuration
# ================================
# Leave empty to auto-configure from REDIS_URL
CELERY_BROKER_URL=
CELERY_RESULT_BACKEND=

CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=600
CELERY_TASK_SOFT_TIME_LIMIT=540
CELERY_WORKER_PREFETCH_MULTIPLIER=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
