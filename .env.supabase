# ============================================================================
# SUPABASE DATABASE CONFIGURATION
# ============================================================================
# 請填入您的 Supabase 項目信息
# 這些信息可以在 Supabase Dashboard -> Settings -> Database 找到

# Supabase Database Configuration
# ================================

# 選項 1: Direct Connection (適合開發環境)
# 格式: postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
# DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres

# 選項 2: Connection Pooler (推薦用於生產環境，支持更多併發連接)
# 格式: postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
# DATABASE_URL=postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres

# 使用 asyncpg 的連接字符串（後端需要）
DATABASE_URL=postgresql+asyncpg://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres

# 分開的數據庫配置（某些工具可能需要）
DATABASE_HOST=aws-0-[REGION].pooler.supabase.com
DATABASE_PORT=6543
DATABASE_NAME=postgres
DATABASE_USER=postgres.[PROJECT-REF]
DATABASE_PASSWORD=[YOUR-PASSWORD]

# 數據庫連接池配置
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Supabase API (用於存儲文件、日誌等)
SUPABASE_URL=https://[PROJECT-REF].supabase.co
SUPABASE_ANON_KEY=[YOUR-ANON-KEY]
SUPABASE_SERVICE_KEY=[YOUR-SERVICE-KEY]  # 僅在後端使用，不要暴露給前端

# ============================================================================
# 其他配置（保持不變）
# ============================================================================

# API Keys
ANTHROPIC_API_KEY=[YOUR-ANTHROPIC-API-KEY]

# Redis Configuration (保持本地或使用 Upstash)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379/0

# CMS Integration
CMS_TYPE=wordpress
CMS_BASE_URL=https://cms.example.com
CMS_USERNAME=editor@domain.com
CMS_APPLICATION_PASSWORD=your_password_here

# Application Configuration
API_PORT=8000
FRONTEND_PORT=3000
FLOWER_PORT=5555
LOG_LEVEL=INFO
ENVIRONMENT=development

# Security
SECRET_KEY=dev-secret-key-please-change-in-production
ALLOWED_ORIGINS='["http://localhost:3000","http://localhost:8000"]'

# Feature Flags
ENABLE_SEMANTIC_SIMILARITY=true
SIMILARITY_THRESHOLD=0.85
MAX_CONCURRENT_GENERATIONS=10

# AI Generation Settings
MAX_ARTICLE_WORD_COUNT=10000
MIN_ARTICLE_WORD_COUNT=100
DEFAULT_ARTICLE_WORD_COUNT=1000
MAX_ARTICLE_GENERATION_TIME=300
MAX_ARTICLE_COST=0.50

# Retry Configuration
MAX_RETRIES=3
RETRY_DELAY=300

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# System
TZ=America/Toronto

# ============================================================================
# 配置步驟：
# ============================================================================
# 1. 登錄您的 Supabase 項目：https://app.supabase.com
# 2. 進入 Settings -> Database 頁面
# 3. 找到以下信息：
#    - Connection string (選擇 "Pooler" 模式用於生產環境)
#    - Database password
#    - Project Reference ID
# 4. 進入 Settings -> API 頁面獲取：
#    - Project URL
#    - anon/public key
#    - service_role key (僅用於後端)
# 5. 替換上面的占位符：
#    - [PROJECT-REF]: 您的項目 ID (例如: xyzcompany)
#    - [YOUR-PASSWORD]: 數據庫密碼
#    - [REGION]: 您的項目區域 (例如: us-east-1)
#    - [YOUR-ANON-KEY]: 公開 API 密鑰
#    - [YOUR-SERVICE-KEY]: 服務角色密鑰
# 6. 保存此文件為 .env
# ============================================================================